---
layout: post
title:  动态邮件列表点滴
category: project
---

今天中午去派出所办了落户，还重新办了身份证，心里有一种复杂的感觉。东北，真的是上上辈人的异乡，我们这辈人的故乡么。

今天动态邮件列表投递系统在测试机上进行了测试，毕竟是自己来网易后新启的第一个比较正规的项目，在这里记录以下在设计上的思路，遇到的问题和踩过的坑吧。

### 开发阶段
#### 对之前项目的依赖（实体类的增删改）
#### 异步操作的设计
#### 线程池粒度的设计
#### 对于异常的处理设计

### 本地调试阶段
#### 对其他项目SDK的依赖

### 联调阶段
#### 依赖管理遇到的问题
#### 调用SDK踩过的坑
#### 配置文件踩过的坑
#### 类元素访问权限问题

### 其他
#### Eclipse本地启动设置类加载
这个项目在做的时候我把它建立成了动态web项目，可以用Eclipse在本地进行调试，debug比较容易，下次可以试试将项目转成maven项目，虽然我们的依赖管理和项目构建使用的是ivy+ant.
在本地运行时遇到了类加载失败的问题，就是在IDE内置的tomcat中找不到类，最后通过配置类的加载路径来解决。但记得上一次出现这个问题还有一个原因是ivy引用的包冲突。
从log上来看，归根结底就是未能顺利加载类造成的，至于为什么未能顺利加载，原因就很多了，暂时遇到的原因就是：
1. Eclipse自启动项目类加载路径的配置问题
2. 依赖管理造成的引用冲突

右键web应用，选择Properties->Deployment Assembly->Add->Java Build Path Entries->选择Jar

#### 对于事务操作的认识
> Atomic: 保证事务中的所有操作是一个不可分割的单元，成功则全部完成，失败则回滚。
> Consistency: 保证执行结果与业务逻辑是一致的。典型的有转账的例子，转账之后，总金额要保证不变。通过原子性保证了一致性。
> Isolation: 多个线程同时操作时，使得不会产生影响。但由于**隔离级别**的不同，会产生不同情况的影响。
> Durability: 事务执行完毕后，对结果进行持久化。
